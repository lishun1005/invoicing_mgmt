"use strict";function SpiceChannelId(){}function SpiceRect(){}function SpiceClipRects(){}function SpiceClip(){}function SpiceImageDescriptor(){}function SpicePalette(){}function SpiceBitmap(){}function SpiceImage(){}function SpiceQMask(){}function SpicePattern(){}function SpiceBrush(){}function SpiceFill(){}function SpiceCopy(){}function SpicePoint16(){}function SpicePoint(){}function SpiceCursorHeader(){}function SpiceCursor(){}function SpiceSurface(){}function SpiceAlphaBlend(){}function SpiceLineAttr(){}function SpicePointFix(){}function SpicePathSeg(){}function SpicePath(){}function SpiceStroke(){}function SpiceText(){}function SpiceString(){}function SpiceRasterGlyph(){}function SpiceInvers(){}function SpiceTransparent(){}function SpiceRop3(){}function SpiceBlackness(){}function SpiceWhiteness(){}SpiceChannelId.prototype={from_dv:function(a,b){return this.type=a.getUint8(b,!0),b++,this.id=a.getUint8(b,!0),b++,b}},SpiceRect.prototype={from_dv:function(a,b){return this.top=a.getUint32(b,!0),b+=4,this.left=a.getUint32(b,!0),b+=4,this.bottom=a.getUint32(b,!0),b+=4,this.right=a.getUint32(b,!0),b+=4},is_same_size:function(a){return this.bottom-this.top==a.bottom-a.top&&this.right-this.left==a.right-a.left?!0:!1}},SpiceClipRects.prototype={from_dv:function(a,b,c){var d;for(this.num_rects=a.getUint32(b,!0),b+=4,this.num_rects>0&&(this.rects=[]),d=0;d<this.num_rects;d++)this.rects[d]=new SpiceRect,b=this.rects[d].from_dv(a,b,c);return b}},SpiceClip.prototype={from_dv:function(a,b,c){return this.type=a.getUint8(b,!0),b++,this.type==SPICE_CLIP_TYPE_RECTS&&(this.rects=new SpiceClipRects,b=this.rects.from_dv(a,b,c)),b}},SpiceImageDescriptor.prototype={from_dv:function(a,b){return this.id=a.getUint64(b,!0),b+=8,this.type=a.getUint8(b,!0),b++,this.flags=a.getUint8(b,!0),b++,this.width=a.getUint32(b,!0),b+=4,this.height=a.getUint32(b,!0),b+=4}},SpicePalette.prototype={from_dv:function(a,b){var d;for(this.unique=a.getUint64(b,!0),b+=8,this.num_ents=a.getUint16(b,!0),b+=2,this.ents=[],d=0;d<this.num_ents;d++)this.ents[d]=a.getUint32(b,!0),b+=4;return b}},SpiceBitmap.prototype={from_dv:function(a,b,c){if(this.format=a.getUint8(b,!0),b++,this.flags=a.getUint8(b,!0),b++,this.x=a.getUint32(b,!0),b+=4,this.y=a.getUint32(b,!0),b+=4,this.stride=a.getUint32(b,!0),b+=4,this.flags&SPICE_BITMAP_FLAGS_PAL_FROM_CACHE)this.palette_id=a.getUint64(b,!0),b+=8;else{var d=a.getUint32(b,!0);b+=4,0==d?this.palette=null:(this.palette=new SpicePalette,this.palette.from_dv(a,d,c))}return this.data=c.slice(b),b+=this.data.byteLength}},SpiceImage.prototype={from_dv:function(a,b,c){var d,e,f,g;if(this.descriptor=new SpiceImageDescriptor,b=this.descriptor.from_dv(a,b,c),this.descriptor.type==SPICE_IMAGE_TYPE_LZ_RGB){for(this.lz_rgb=new Object,this.lz_rgb.length=a.getUint32(b,!0),b+=4,d=b,this.lz_rgb.magic="",e=3;e>=0;e--)this.lz_rgb.magic+=String.fromCharCode(a.getUint8(b+e));b+=4,this.lz_rgb.version=a.getUint32(b),b+=4,this.lz_rgb.type=a.getUint32(b),b+=4,this.lz_rgb.width=a.getUint32(b),b+=4,this.lz_rgb.height=a.getUint32(b),b+=4,this.lz_rgb.stride=a.getUint32(b),b+=4,this.lz_rgb.top_down=a.getUint32(b),b+=4,f=b-d,this.lz_rgb.data=c.slice(b,this.lz_rgb.length+b-f),b+=this.lz_rgb.data.byteLength}if(this.descriptor.type==SPICE_IMAGE_TYPE_BITMAP&&(this.bitmap=new SpiceBitmap,b=this.bitmap.from_dv(a,b,c)),this.descriptor.type==SPICE_IMAGE_TYPE_SURFACE&&(this.surface_id=a.getUint32(b,!0),b+=4),this.descriptor.type==SPICE_IMAGE_TYPE_JPEG&&(this.jpeg=new Object,this.jpeg.data_size=a.getUint32(b,!0),b+=4,this.jpeg.data=c.slice(b),b+=this.jpeg.data.byteLength),this.descriptor.type==SPICE_IMAGE_TYPE_JPEG_ALPHA){for(this.jpeg_alpha=new Object,this.jpeg_alpha.flags=a.getUint8(b,!0),b+=1,this.jpeg_alpha.jpeg_size=a.getUint32(b,!0),b+=4,this.jpeg_alpha.data_size=a.getUint32(b,!0),b+=4,this.jpeg_alpha.data=c.slice(b,this.jpeg_alpha.jpeg_size+b),b+=this.jpeg_alpha.data.byteLength,this.jpeg_alpha.alpha=new Object,this.jpeg_alpha.alpha.length=this.jpeg_alpha.data_size-this.jpeg_alpha.jpeg_size,d=b,this.jpeg_alpha.alpha.magic="",e=3;e>=0;e--)this.jpeg_alpha.alpha.magic+=String.fromCharCode(a.getUint8(b+e));b+=4,this.jpeg_alpha.alpha.version=a.getUint32(b),b+=4,this.jpeg_alpha.alpha.type=a.getUint32(b),b+=4,this.jpeg_alpha.alpha.width=a.getUint32(b),b+=4,this.jpeg_alpha.alpha.height=a.getUint32(b),b+=4,this.jpeg_alpha.alpha.stride=a.getUint32(b),b+=4,this.jpeg_alpha.alpha.top_down=a.getUint32(b),b+=4,f=b-d,this.jpeg_alpha.alpha.data=c.slice(b,this.jpeg_alpha.alpha.length+b-f),b+=this.jpeg_alpha.alpha.data.byteLength}if(this.descriptor.type==SPICE_IMAGE_TYPE_QUIC&&(this.quic=new SpiceQuic,b=this.quic.from_dv(a,b,c)),this.descriptor.type==SPICE_IMAGE_TYPE_LZ_PLT){for(this.lz_plt=new Object,this.lz_plt.flags=a.getUint8(b,!0),b++,this.lz_plt.length=a.getUint32(b,!0),b+=4,this.lz_plt.flags&SPICE_BITMAP_FLAGS_PAL_FROM_CACHE?(this.lz_plt.palette_id=a.getUint64(b,!0),b+=8):(g=a.getUint32(b,!0),b+=4,0==g?this.lz_plt.palette=null:(this.lz_plt.palette=new SpicePalette,this.lz_plt.palette.from_dv(a,g,c))),d=b,this.lz_plt.magic="",e=3;e>=0;e--)this.lz_plt.magic+=String.fromCharCode(a.getUint8(b+e));b+=4,this.lz_plt.version=a.getUint32(b),b+=4,this.lz_plt.type=a.getUint32(b),b+=4,this.lz_plt.width=a.getUint32(b),b+=4,this.lz_plt.height=a.getUint32(b),b+=4,this.lz_plt.stride=a.getUint32(b),b+=4,this.lz_plt.top_down=a.getUint32(b),b+=4,f=b-d,this.lz_plt.data=c.slice(b,this.lz_plt.length+b-f),b+=this.lz_plt.data.byteLength}return b}},SpiceQMask.prototype={from_dv:function(a,b,c){this.flags=a.getUint8(b,!0),b++,this.pos=new SpicePoint,b=this.pos.from_dv(a,b,c);var d=a.getUint32(b,!0);return b+=4,0==d?(this.bitmap=null,b):(this.bitmap=new SpiceImage,this.bitmap.from_dv(a,d,c))}},SpicePattern.prototype={from_dv:function(a,b,c){var d=a.getUint32(b,!0);return b+=4,0==d?this.pat=null:(this.pat=new SpiceImage,this.pat.from_dv(a,d,c)),this.pos=new SpicePoint,this.pos.from_dv(a,b,c)}},SpiceBrush.prototype={from_dv:function(a,b,c){return this.type=a.getUint8(b,!0),b++,this.type==SPICE_BRUSH_TYPE_SOLID?(this.color=a.getUint32(b,!0),b+=4):this.type==SPICE_BRUSH_TYPE_PATTERN&&(this.pattern=new SpicePattern,b=this.pattern.from_dv(a,b,c)),b}},SpiceFill.prototype={from_dv:function(a,b,c){return this.brush=new SpiceBrush,b=this.brush.from_dv(a,b,c),this.rop_descriptor=a.getUint16(b,!0),b+=2,this.mask=new SpiceQMask,this.mask.from_dv(a,b,c)}},SpiceCopy.prototype={from_dv:function(a,b,c){var d=a.getUint32(b,!0);return b+=4,0==d?this.src_bitmap=null:(this.src_bitmap=new SpiceImage,this.src_bitmap.from_dv(a,d,c)),this.src_area=new SpiceRect,b=this.src_area.from_dv(a,b,c),this.rop_descriptor=a.getUint16(b,!0),b+=2,this.scale_mode=a.getUint8(b,!0),b++,this.mask=new SpiceQMask,this.mask.from_dv(a,b,c)}},SpicePoint16.prototype={from_dv:function(a,b){return this.x=a.getUint16(b,!0),b+=2,this.y=a.getUint16(b,!0),b+=2}},SpicePoint.prototype={from_dv:function(a,b){return this.x=a.getUint32(b,!0),b+=4,this.y=a.getUint32(b,!0),b+=4}},SpiceCursorHeader.prototype={from_dv:function(a,b){return this.unique=a.getUint64(b,!0),b+=8,this.type=a.getUint8(b,!0),b++,this.width=a.getUint16(b,!0),b+=2,this.height=a.getUint16(b,!0),b+=2,this.hot_spot_x=a.getUint16(b,!0),b+=2,this.hot_spot_y=a.getUint16(b,!0),b+=2}},SpiceCursor.prototype={from_dv:function(a,b,c){return this.flags=a.getUint16(b,!0),b+=2,this.flags&SPICE_CURSOR_FLAGS_NONE?this.header=null:(this.header=new SpiceCursorHeader,b=this.header.from_dv(a,b,c),this.data=c.slice(b),b+=this.data.byteLength),b}},SpiceSurface.prototype={from_dv:function(a,b){return this.surface_id=a.getUint32(b,!0),b+=4,this.width=a.getUint32(b,!0),b+=4,this.height=a.getUint32(b,!0),b+=4,this.format=a.getUint32(b,!0),b+=4,this.flags=a.getUint32(b,!0),b+=4}},SpiceAlphaBlend.prototype={from_dv:function(a,b,c){this.alpha_flags=a.getUint8(b,!0),b++,this.alpha=a.getUint8(b,!0),b++;var d=a.getUint32(b,!0);return b+=4,0==d?this.src_bitmap=null:(this.src_bitmap=new SpiceImage,this.src_bitmap.from_dv(a,d,c)),this.src_area=new SpiceRect,this.src_area.from_dv(a,b,c)}},SpiceLineAttr.prototype={from_dv:function(a,b){return this.flags=a.getUint8(b,!0),b++,this.style_nseg=a.getUint8(b,!0),b++,this.style=a.getUint32(b,!0),b+=4}},SpicePointFix.prototype={from_dv:function(a,b){return this.x=a.getUint32(b,!0),b+=4,this.y=a.getUint32(b,!0),b+=4}},SpicePathSeg.prototype={from_dv:function(a,b,c){if(this.flags=a.getUint8(b,!0),b++,this.count=a.getUint32(b,!0),b+=4,this.points=[],this.count>0)for(var d=0;d<this.count;d++)this.points[d]=new SpicePointFix,b=this.points[d].from_dv(a,b,c);return b}},SpicePath.prototype={from_dv:function(a,b,c){if(this.num_segments=a.getUint32(b,!0),b+=4,this.segments=[],this.num_segments>0)for(var d=0;d<this.num_segments;d++)this.segments[d]=new SpicePathSeg,b=this.segments[d].from_dv(a,b,c);return b}},SpiceStroke.prototype={from_dv:function(a,b,c){var d=a.getUint16(b,!0);return b+=2,this.path=new SpicePath,this.path.from_dv(a,d,c),this.attr=new SpiceLineAttr,this.attr.from_dv(a,b,c),b+=3,this.brush=new SpiceBrush,b=this.brush.from_dv(a,b,c),this.fore_mode=a.getUint16(b,!0),b+=2,this.back_mode=a.getUint16(b,!0),b+=2}},SpiceText.prototype={from_dv:function(a,b,c){var d=a.getUint32(b,!0);return b+=4,this.back_area=new SpiceRect,b=this.back_area.from_dv(a,b,c),this.fore_brush=new SpiceBrush,b=this.fore_brush.from_dv(a,b,c),this.back_brush=new SpiceBrush,b=this.back_brush.from_dv(a,b,c),this.fore_mode=a.getUint16(b,!0),b+=2,this.back_mode=a.getUint16(b,!0),b+=2,this.str=new SpiceString,this.str.from_dv(a,d,c),b}},SpiceString.prototype={from_dv:function(a,b,c){if(this.length=a.getUint16(b,!0),b+=2,this.flags=a.getUint8(b,!0),b++,this.length>0)for(this.glyphs=[],i=0;i<this.length;i++)this.glyphs[i]=new SpiceRasterGlyph,b=this.glyphs[i].from_dv(a,b,c,this.flags);return b}},SpiceRasterGlyph.prototype={from_dv:function(a,b,c,d){this.render_pos=new SpicePoint,b=this.render_pos.from_dv(a,b,c),this.glyph_origin=new SpicePoint,b=this.glyph_origin.from_dv(a,b,c),this.width=a.getUint16(b,!0),b+=2,this.height=a.getUint16(b,!0),b+=2;var e=0;return d&SPICE_STRING_FLAGS_RASTER_A1?e=SPICE_ALIGN(this.width,8)>>3:d&SPICE_STRING_FLAGS_RASTER_A4&&(e=SPICE_ALIGN(4*this.width,8)>>3),this.data=c.slice(b,b+e*this.height),b+=this.data.byteLength}},SpiceInvers.prototype={from_dv:function(a,b,c){return this.mask=new SpiceQMask,this.mask.from_dv(a,b,c)}},SpiceTransparent.prototype={from_dv:function(a,b,c){var d=a.getUint32(b,!0);return b+=4,0==d?this.src_bitmap=null:(this.src_bitmap=new SpiceImage,this.src_bitmap.from_dv(a,d,c)),this.src_area=new SpiceRect,b=this.src_area.from_dv(a,b,c),this.src_color=a.getUint32(b,!0),b+=4,this.true_color=a.getUint32(b,!0),b+=4}},SpiceRop3.prototype={from_dv:function(a,b,c){var d=a.getUint32(b,!0);return b+=4,0==d?this.src_bitmap=null:(this.src_bitmap=new SpiceImage,this.src_bitmap.from_dv(a,d,c)),this.src_area=new SpiceRect,b=this.src_area.from_dv(a,b,c),this.brush=new SpiceBrush,b=this.brush.from_dv(a,b,c),this.rop3=a.getUint8(b,!0),b++,this.scale_mode=a.getUint8(b,!0),b++,this.mask=new SpiceQMask,this.mask.from_dv(a,b,c)}},SpiceBlackness.prototype={from_dv:function(a,b,c){return this.mask=new SpiceQMask,this.mask.from_dv(a,b,c)}},SpiceWhiteness.prototype={from_dv:function(a,b,c){return this.mask=new SpiceQMask,this.mask.from_dv(a,b,c)}};