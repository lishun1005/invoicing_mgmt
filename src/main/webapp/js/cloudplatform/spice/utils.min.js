"use strict";function combine_array_buffers(a,b){var h,c=new Uint8Array(a),d=new Uint8Array(b),e=new ArrayBuffer(a.byteLength+b.byteLength),f=new Uint8Array(e),g=0;for(h=0;h<c.length;h++)f[g++]=c[h];for(h=0;h<d.length;h++)f[g++]=d[h];return e}function hexdump_buffer(a){var f,g,b=new Uint8Array(a),c="",d="",e=0;for(f=0;f<b.length;f++)if(g=Number(b[f]).toString(16),1==g.length&&(c+="0"),c+=g+" ",d+=String.fromCharCode(b[f]),15==f%16||f==b.length-1){for(;15!=f%16;)c+="   ",f++;0==e&&console.log(c+" | "+d),"00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "==c?1==e?(console.log("."),e++):0==e&&e++:e=0,c=d=""}}function get_scancode(a){return void 0===common_scanmap[a]?-1!=navigator.userAgent.indexOf("Firefox")?firefox_scanmap[a]:DOM_scanmap[a]:common_scanmap[a]}function keycode_to_start_scan(a){var b=get_scancode(a);return void 0===b?(console.log("no map for "+a),0):256>b?b:224|b-256<<8}function keycode_to_end_scan(a){var b=get_scancode(a);return void 0===b?0:256>b?128|b:32992|b-256<<8}var firefox_scanmap,DOM_scanmap,DEBUG=0,DUMP_DRAWS=!1,DUMP_CANVASES=!1,common_scanmap=[];common_scanmap["Q".charCodeAt(0)]=KEY_Q,common_scanmap["W".charCodeAt(0)]=KEY_W,common_scanmap["E".charCodeAt(0)]=KEY_E,common_scanmap["R".charCodeAt(0)]=KEY_R,common_scanmap["T".charCodeAt(0)]=KEY_T,common_scanmap["Y".charCodeAt(0)]=KEY_Y,common_scanmap["U".charCodeAt(0)]=KEY_U,common_scanmap["I".charCodeAt(0)]=KEY_I,common_scanmap["O".charCodeAt(0)]=KEY_O,common_scanmap["P".charCodeAt(0)]=KEY_P,common_scanmap["A".charCodeAt(0)]=KEY_A,common_scanmap["S".charCodeAt(0)]=KEY_S,common_scanmap["D".charCodeAt(0)]=KEY_D,common_scanmap["F".charCodeAt(0)]=KEY_F,common_scanmap["G".charCodeAt(0)]=KEY_G,common_scanmap["H".charCodeAt(0)]=KEY_H,common_scanmap["J".charCodeAt(0)]=KEY_J,common_scanmap["K".charCodeAt(0)]=KEY_K,common_scanmap["L".charCodeAt(0)]=KEY_L,common_scanmap["Z".charCodeAt(0)]=KEY_Z,common_scanmap["X".charCodeAt(0)]=KEY_X,common_scanmap["C".charCodeAt(0)]=KEY_C,common_scanmap["V".charCodeAt(0)]=KEY_V,common_scanmap["B".charCodeAt(0)]=KEY_B,common_scanmap["N".charCodeAt(0)]=KEY_N,common_scanmap["M".charCodeAt(0)]=KEY_M,common_scanmap[" ".charCodeAt(0)]=KEY_Space,common_scanmap[13]=KEY_Enter,common_scanmap[27]=KEY_Escape,common_scanmap[8]=KEY_BackSpace,common_scanmap[9]=KEY_Tab,common_scanmap[16]=KEY_ShiftL,common_scanmap[17]=KEY_LCtrl,common_scanmap[18]=KEY_Alt,common_scanmap[20]=KEY_CapsLock,common_scanmap[144]=KEY_NumLock,common_scanmap[112]=KEY_F1,common_scanmap[113]=KEY_F2,common_scanmap[114]=KEY_F3,common_scanmap[115]=KEY_F4,common_scanmap[116]=KEY_F5,common_scanmap[117]=KEY_F6,common_scanmap[118]=KEY_F7,common_scanmap[119]=KEY_F8,common_scanmap[120]=KEY_F9,common_scanmap[121]=KEY_F10,common_scanmap[122]=KEY_F11,common_scanmap[123]=KEY_F12,common_scanmap[12]=KEY_EMPTY,common_scanmap[42]=99,common_scanmap[19]=101,common_scanmap[111]=57397,common_scanmap[106]=KEY_KP_Multiply,common_scanmap[36]=57415,common_scanmap[38]=57416,common_scanmap[33]=57417,common_scanmap[37]=57419,common_scanmap[39]=57421,common_scanmap[35]=57423,common_scanmap[40]=57424,common_scanmap[34]=57425,common_scanmap[45]=57426,common_scanmap[46]=57427,common_scanmap[44]=10807,common_scanmap["1".charCodeAt(0)]=KEY_1,common_scanmap["2".charCodeAt(0)]=KEY_2,common_scanmap["3".charCodeAt(0)]=KEY_3,common_scanmap["4".charCodeAt(0)]=KEY_4,common_scanmap["5".charCodeAt(0)]=KEY_5,common_scanmap["6".charCodeAt(0)]=KEY_6,common_scanmap["7".charCodeAt(0)]=KEY_7,common_scanmap["8".charCodeAt(0)]=KEY_8,common_scanmap["9".charCodeAt(0)]=KEY_9,common_scanmap["0".charCodeAt(0)]=KEY_0,common_scanmap[145]=KEY_ScrollLock,common_scanmap[103]=KEY_7,common_scanmap[104]=KEY_8,common_scanmap[105]=KEY_9,common_scanmap[100]=KEY_4,common_scanmap[101]=KEY_5,common_scanmap[102]=KEY_6,common_scanmap[107]=KEY_KP_Plus,common_scanmap[109]=KEY_KP_Minus,common_scanmap[97]=KEY_1,common_scanmap[98]=KEY_2,common_scanmap[99]=KEY_3,common_scanmap[96]=KEY_0,common_scanmap[110]=KEY_Period,common_scanmap[191]=KEY_Slash,common_scanmap[190]=KEY_Period,common_scanmap[188]=KEY_Comma,common_scanmap[220]=KEY_BSlash,common_scanmap[192]=KEY_Tilde,common_scanmap[222]=KEY_Quote,common_scanmap[219]=KEY_LBrace,common_scanmap[221]=KEY_RBrace,common_scanmap[91]=347,common_scanmap[92]=347,common_scanmap[93]=57437,firefox_scanmap=[],firefox_scanmap[173]=KEY_Minus,firefox_scanmap[109]=KEY_Minus,firefox_scanmap[61]=KEY_Equal,firefox_scanmap[59]=KEY_SemiColon,DOM_scanmap=[],DOM_scanmap[189]=KEY_Minus,DOM_scanmap[187]=KEY_Equal,DOM_scanmap[186]=KEY_SemiColon;